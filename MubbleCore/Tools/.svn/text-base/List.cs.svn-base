using System;
using System.Collections.Generic;
using System.Text;
using System.Collections;

namespace Mubble.Tools
{
    /// <summary>
    /// A class full of goodness for Iterating Lists... mainly lists of MubbleComponents
    /// </summary>
    /*public class List
    {
        /// <summary>
        /// Filters a list of MubbleComponents using the built in filtering function.
        /// </summary>
        /// <param name="list">The list of items to search</param>
        /// <param name="pattern">The pattern to match</param>
        /// <returns>Matching MubbleComponents</returns>
        public static IEnumerable<Mubble.MubbleObject> Filter(IEnumerable list, string pattern)
        {
            bool returnAll = false;
            if (pattern == null || pattern.Trim().Length == 0)
            {
                returnAll = true;
            }
            foreach (MubbleObject item in list)
            {
                if (returnAll || item.Contains(pattern))
                {
                    yield return item;
                }
            }
        }

        /// <summary>
        /// Returns a single "page" from a list of MubbleComponents.
        /// </summary>
        /// <param name="list">The list of items to draw from</param>
        /// <param name="page">Requested page</param>
        /// <param name="pageSize">The size of each page</param>
        /// <returns></returns>
        public static IEnumerable<Mubble.MubbleObject> Page(IEnumerable list, int page, int pageSize)
        {
            if (page < 1)
            {
                page = 1;
            }
            int startIndex = ((page - 1) * pageSize);
            int endIndex = startIndex + pageSize;

            int i = 0;
            foreach (MubbleObject item in list)
            {
                if (i >= startIndex)
                {
                    yield return item;
                }
                if (i++ >= endIndex)
                {
                    yield break;
                }
            }
        }

        /// <summary>
        /// 
        /// </summary>
        /// <param name="list"></param>
        /// <param name="page"></param>
        /// <param name="pageSize"></param>
        /// <param name="linkFormat"></param>
        /// <returns></returns>
        public static IEnumerable<Link> PageList(IEnumerable list, int page, int pageSize, string linkFormat)
        {
            Link previous = new Link();
            if (page > 1) previous.Url = string.Format(linkFormat, page - 1);
            previous.Text = "&laquo;";
            yield return previous;
        }
    }*/
}
